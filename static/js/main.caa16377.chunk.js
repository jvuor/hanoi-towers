(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(t,e,n){},179:function(t,e,n){},181:function(t,e,n){"use strict";n.r(e);var i=n(1),s=n.n(i),a=n(66),r=n.n(a),o=n(2),c=n(3),l=n(5),u=n(4),d=n(6),h=(n(74),n(75),n(18)),p=n(67),m=n(29),f=v();function v(){for(var t=function(t,e){return Math.floor(Math.random()*(e-t))+t},e=[],n=[t(50,220),t(50,220),t(50,220)].map(function(t){return t/22}),i=Object(h.a)(n),s=0;s<20;s++)e.push(i),i=i.map(function(t,e){return t+n[e]});var a=e.map(function(t){return"rgb(".concat(t[0],", ").concat(t[1],", ").concat(t[2],")")});return document.body.style.background="repeating-linear-gradient(\n                                      -45deg,\n                                      ".concat(a[10],",\n                                      ").concat(a[10]," 30px,\n                                      ").concat(a[16]," 30px,\n                                      ").concat(a[16]," 60px\n                                    )"),a}var g=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state=void 0,n.rods=void 0,n.rodsNr=void 0,n.canvas=void 0,n.ctx=void 0,n.getWidthOfTheLargestDisc=function(){return 40+20*n.props.discs},n.getHeigth=function(){return 20*n.props.discs+60},n.getWidth=function(){return n.getWidthOfTheLargestDisc()*n.rodsNr+20*n.rodsNr},n.rodsNr=3,n.state={width:100,height:100},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.canvas=this.refs.canvas,this.ctx=this.canvas.getContext("2d"),this.drawBase()}},{key:"componentDidUpdate",value:function(){this.drawBase()}},{key:"drawBase",value:function(){var t=this,e=this.getWidthOfTheLargestDisc(),n=this.getWidth(),i=this.getHeigth(),s=i-40,a=20+e/2,r=e+10;this.rods=new Array(this.rodsNr).fill(null),this.rods=this.rods.map(function(t){var e=a;return a+=r,e}),this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,n,i),this.ctx.beginPath(),this.ctx.lineWidth=4,this.ctx.moveTo(0,i-10),this.ctx.lineTo(n,i-10),this.rods.forEach(function(e){t.ctx.moveTo(e,i-10),t.ctx.lineTo(e,i-10-s)}),this.ctx.stroke(),this.drawDiscs()}},{key:"drawDiscs",value:function(){var t=this,e=Array(this.rodsNr).fill(0),n=this.getWidthOfTheLargestDisc();this.props.discLocations.forEach(function(i,s){var a=t.getHeigth()-10-20*e[i]-20,r=t.rods[i]-n/2;t.ctx.fillStyle=f[Math.floor(s/t.props.discs*20)],t.ctx.fillRect(r,a,n,20),t.ctx.strokeStyle="black",t.ctx.lineWidth=3,t.ctx.strokeRect(r,a,n,20),n-=20,e[i]+=1})}},{key:"render",value:function(){return s.a.createElement("canvas",{ref:"canvas",width:this.getWidth(),height:this.getHeigth()})}}]),e}(s.a.Component),b=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state=void 0,n.componentDidUpdate=function(t){if(t.solutionId!==n.props.solutionId){console.log("new solution received");for(var e=[],i=0;i<n.props.discs;i++)e.push(0);n.setState({currentIndex:-1,discLocations:e}),n.state.timer&&clearInterval(n.state.timer);var s=setInterval(n.cycleSolution,n.getAnimationSpeed(n.props.discs));n.setState({timer:s})}},n.cycleSolution=function(){var t=n.state.currentIndex+1;if(t>=n.props.solution.length)clearInterval(n.state.timer),n.setState({timer:null});else{var e=n.props.solution[t][0],i=n.props.solution[t][1],s=Object(h.a)(n.state.discLocations);s[s.lastIndexOf(e)]=i,n.setState({discLocations:s,currentIndex:t})}},n.getAnimationSpeed=function(t){return t<6?750:t<11?500:t<16?200:50},n.getOptimalMoveCount=function(){return Math.pow(2,n.props.discs)-1},n.getProgressPercentage=function(){return n.state.currentIndex/n.props.solution.length*100},n.displayTimeRemaining=function(){if(!n.state.timer)return null;var t=(n.props.solution.length-n.state.currentIndex)*n.getAnimationSpeed(n.props.discs),e=new Date;return Object(m.distanceInWordsStrict)(e,Object(m.addMilliseconds)(e,t))+" remaining"},n.getProgressBar=function(){return n.state.timer?s.a.createElement("div",{style:{width:"50px",margin:"auto",paddingTop:"10px"}},s.a.createElement(p.a,{percentage:n.getProgressPercentage(),strokeWidth:25,styles:{path:{strokeLinecap:"butt",stroke:f[Math.floor(n.getProgressPercentage()/6)]},text:{fill:"#000"}}})):null},n.state={currentId:null,currentIndex:null,timer:null,discLocations:[0,0,0,0,0]},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(g,{discs:this.props.discs,discLocations:this.state.discLocations}),s.a.createElement("br",null),"".concat(this.state.currentIndex+1," / ").concat(this.getOptimalMoveCount()),this.getProgressBar(),this.displayTimeRemaining())}}]),e}(s.a.Component);function x(t){var e=Array(t).fill(null).map(function(t,e){return e+1}),n=[],i=[];e.name=0,n.name=1,i.name=2;var s=[];return function t(e,n,i,s,a){e>0&&(t(e-1,n,s,i,a),i.push(n.pop()),a.push([n.name,i.name]),t(e-1,s,i,n,a))}(t,e,i,n,s),s}n(178);var O=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state=void 0,n.setDiscs=function(t){n.setState({discAmount:t.target.value})},n.solve=function(){var t=x(n.state.discAmount);n.props.setSolution(n.state.discAmount,t),f=v()},n.state={discAmount:5},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"solution"},s.a.createElement("label",{htmlFor:"discs"},"Set the number of discs"),s.a.createElement("input",{name:"discs",type:"range",min:"3",max:"20",value:this.state.discAmount,onChange:this.setDiscs}),s.a.createElement("span",{className:"number"},this.state.discAmount),s.a.createElement("button",{onClick:this.solve},"Solve"))}}]),e}(s.a.Component),E=(n(179),function(){return s.a.createElement("div",{className:"footer"},s.a.createElement("hr",null),"\ud83c\udf1e ",s.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Tower_of_Hanoi"},"Wikipedia")," | ",s.a.createElement("a",{href:"https://github.com/jvuor/hanoi-towers"},"Github")," \ud83c\udf1e")}),j=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state=void 0,n.setSolution=function(t,e){n.setState({discs:t,solution:e,solutionId:n.state.solutionId+1})},n.state={discs:5,solution:null,solutionId:0},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"center"},s.a.createElement("div",null,s.a.createElement("div",{className:"container container-header"},"--- Tower of Hanoi ---"),s.a.createElement("div",{className:"container container-app"},s.a.createElement(O,{setSolution:this.setSolution}),s.a.createElement(b,{discs:this.state.discs,solution:this.state.solution,solutionId:this.state.solutionId}),s.a.createElement(E,null))))}}]),e}(s.a.Component);n(180);r.a.render(s.a.createElement(j,null),document.getElementById("root"))},68:function(t,e,n){t.exports=n(181)},75:function(t,e,n){}},[[68,1,2]]]);
//# sourceMappingURL=main.caa16377.chunk.js.map
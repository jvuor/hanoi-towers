(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{177:function(t,e,n){},178:function(t,e,n){},180:function(t,e,n){"use strict";n.r(e);var s=n(1),i=n.n(s),a=n(65),o=n.n(a),r=n(2),c=n(3),l=n(5),u=n(4),d=n(6),h=(n(74),n(67)),p=n(66),f=n(28),m=["#030603","#060C06","#091209","#0B170C","#0E1D0F","#112312","#142915","#162E18","#19341B","#1C3A1E","#1E3F20","#325034","#466148","#5B735C","#6F8471","#849685","#98A799","#ADB9AD","#C1CAC2","#D6DCD6","#EAEDEA"],v=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state=void 0,n.rods=void 0,n.rodsNr=void 0,n.canvas=void 0,n.ctx=void 0,n.getWidthOfTheLargestDisc=function(){return 40+20*n.props.discs},n.getHeigth=function(){return 20*n.props.discs+60},n.getWidth=function(){return n.getWidthOfTheLargestDisc()*n.rodsNr+20*n.rodsNr},n.rodsNr=3,n.state={width:100,height:100},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.canvas=this.refs.canvas,this.ctx=this.canvas.getContext("2d"),this.drawBase()}},{key:"componentDidUpdate",value:function(){this.drawBase()}},{key:"drawBase",value:function(){var t=this,e=this.getWidthOfTheLargestDisc(),n=this.getWidth(),s=this.getHeigth(),i=s-40,a=20+e/2,o=e+10;this.rods=new Array(this.rodsNr).fill(null),this.rods=this.rods.map(function(t){var e=a;return a+=o,e}),this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,n,s),this.ctx.beginPath(),this.ctx.lineWidth=4,this.ctx.moveTo(0,s-10),this.ctx.lineTo(n,s-10),this.rods.forEach(function(e){t.ctx.moveTo(e,s-10),t.ctx.lineTo(e,s-10-i)}),this.ctx.stroke(),this.drawDiscs()}},{key:"drawDiscs",value:function(){var t=this,e=Array(this.rodsNr).fill(0),n=this.getWidthOfTheLargestDisc();this.props.discLocations.forEach(function(s,i){var a=t.getHeigth()-10-20*e[s]-20,o=t.rods[s]-n/2;t.ctx.fillStyle=m[Math.floor(i/t.props.discs*20)],t.ctx.fillRect(o,a,n,20),t.ctx.strokeStyle="black",t.ctx.lineWidth=3,t.ctx.strokeRect(o,a,n,20),n-=20,e[s]+=1})}},{key:"render",value:function(){return i.a.createElement("canvas",{ref:"canvas",width:this.getWidth(),height:this.getHeigth()})}}]),e}(i.a.Component),g=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state=void 0,n.componentDidUpdate=function(t){if(t.solutionId!==n.props.solutionId){console.log("new solution received");for(var e=[],s=0;s<n.props.discs;s++)e.push(0);n.setState({currentIndex:-1,discLocations:e}),n.state.timer&&clearInterval(n.state.timer);var i=setInterval(n.cycleSolution,n.getAnimationSpeed(n.props.discs));n.setState({timer:i})}},n.cycleSolution=function(){var t=n.state.currentIndex+1;if(t>=n.props.solution.length)clearInterval(n.state.timer),n.setState({timer:null});else{var e=n.props.solution[t][0],s=n.props.solution[t][1],i=Object(h.a)(n.state.discLocations);i[i.lastIndexOf(e)]=s,n.setState({discLocations:i,currentIndex:t})}},n.getAnimationSpeed=function(t){return t<6?750:t<11?500:t<16?200:50},n.getOptimalMoveCount=function(){return Math.pow(2,n.props.discs)-1},n.getProgressPercentage=function(){return n.state.currentIndex/n.props.solution.length*100},n.displayTimeRemaining=function(){if(!n.state.timer)return null;var t=(n.props.solution.length-n.state.currentIndex)*n.getAnimationSpeed(n.props.discs),e=new Date;return Object(f.distanceInWordsStrict)(e,Object(f.addMilliseconds)(e,t))+" remaining"},n.getProgressBar=function(){return n.state.timer?i.a.createElement("div",{style:{width:"50px",margin:"auto",paddingTop:"10px"}},i.a.createElement(p.a,{percentage:n.getProgressPercentage(),strokeWidth:25,styles:{path:{strokeLinecap:"butt",stroke:"#6F8471"},text:{fill:"#000"}}})):null},n.state={currentId:null,currentIndex:null,timer:null,discLocations:[0,0,0,0,0]},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(v,{discs:this.props.discs,discLocations:this.state.discLocations}),i.a.createElement("br",null),"".concat(this.state.currentIndex+1," / ").concat(this.getOptimalMoveCount()),this.getProgressBar(),this.displayTimeRemaining())}}]),e}(i.a.Component);function b(t){var e=Array(t).fill(null).map(function(t,e){return e+1}),n=[],s=[];e.name=0,n.name=1,s.name=2;var i=[];return function t(e,n,s,i,a){e>0&&(t(e-1,n,i,s,a),s.push(n.pop()),a.push([n.name,s.name]),t(e-1,i,s,n,a))}(t,e,s,n,i),i}n(177);var x=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state=void 0,n.setDiscs=function(t){n.setState({discAmount:t.target.value})},n.solve=function(){var t=b(n.state.discAmount);n.props.setSolution(n.state.discAmount,t)},n.state={discAmount:5},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"solution"},i.a.createElement("label",{htmlFor:"discs"},"Set the number of discs"),i.a.createElement("input",{name:"discs",type:"range",min:"3",max:"20",value:this.state.discAmount,onChange:this.setDiscs}),i.a.createElement("span",{className:"number"},this.state.discAmount),i.a.createElement("button",{onClick:this.solve},"Solve"))}}]),e}(i.a.Component),E=(n(178),function(){return i.a.createElement("div",{className:"footer"},i.a.createElement("hr",null),"\ud83c\udf1e ",i.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Tower_of_Hanoi"},"Wikipedia")," | ",i.a.createElement("a",{href:"https://github.com/jvuor/hanoi-towers"},"Github")," \ud83c\udf1e")}),O=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state=void 0,n.setSolution=function(t,e){n.setState({discs:t,solution:e,solutionId:n.state.solutionId+1})},n.state={discs:5,solution:null,solutionId:0},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(x,{setSolution:this.setSolution}),i.a.createElement(g,{discs:this.state.discs,solution:this.state.solution,solutionId:this.state.solutionId}),i.a.createElement(E,null))}}]),e}(i.a.Component);n(179);o.a.render(i.a.createElement(O,null),document.getElementById("root"))},68:function(t,e,n){t.exports=n(180)},74:function(t,e,n){}},[[68,1,2]]]);
//# sourceMappingURL=main.5bf44b76.chunk.js.map
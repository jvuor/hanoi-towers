(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(t,e,n){},179:function(t,e,n){},180:function(t,e,n){},182:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),s=n(66),r=n.n(s),o=n(2),c=n(3),l=n(5),u=n(4),d=n(6),h=(n(74),n(75),n(18)),m=n(67),f=n(29),p=v();function v(){for(var t=function(t,e){return Math.floor(Math.random()*(e-t))+t},e=[],n=[t(50,220),t(50,220),t(50,220)].map(function(t){return t/22}),a=Object(h.a)(n),i=0;i<20;i++)e.push(a),a=a.map(function(t,e){return t+n[e]});var s=e.map(function(t){return"rgb(".concat(Math.floor(t[0]),", ").concat(Math.floor(t[1]),", ").concat(Math.floor(t[2]),")")});return document.body.style.background=s[10],document.body.style.backgroundImage="repeating-linear-gradient(\n                                      -45deg,\n                                      ".concat(s[10],",\n                                      ").concat(s[10]," 30px,\n                                      ").concat(s[16]," 30px,\n                                      ").concat(s[16]," 60px\n                                    )"),s}var g=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state=void 0,n.rods=void 0,n.rodsNr=void 0,n.canvas=void 0,n.ctx=void 0,n.getWidthOfTheLargestDisc=function(){return 40+20*n.props.discs},n.getHeigth=function(){return 20*n.props.discs+60},n.getWidth=function(){return n.getWidthOfTheLargestDisc()*n.rodsNr+20*n.rodsNr},n.rodsNr=3,n.state={width:100,height:100},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.canvas=this.refs.canvas,this.ctx=this.canvas.getContext("2d"),this.drawBase()}},{key:"componentDidUpdate",value:function(){this.drawBase()}},{key:"drawBase",value:function(){var t=this,e=this.getWidthOfTheLargestDisc(),n=this.getWidth(),a=this.getHeigth(),i=a-40,s=20+e/2,r=e+10;this.rods=new Array(this.rodsNr).fill(null),this.rods=this.rods.map(function(t){var e=s;return s+=r,e}),this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,n,a),this.ctx.beginPath(),this.ctx.lineWidth=4,this.ctx.moveTo(0,a-10),this.ctx.lineTo(n,a-10),this.rods.forEach(function(e){t.ctx.moveTo(e,a-10),t.ctx.lineTo(e,a-10-i)}),this.ctx.stroke(),this.drawDiscs()}},{key:"drawDiscs",value:function(){var t=this,e=Array(this.rodsNr).fill(0),n=this.getWidthOfTheLargestDisc();this.props.discLocations.forEach(function(a,i){var s=t.getHeigth()-10-20*e[a]-20,r=t.rods[a]-n/2;t.ctx.fillStyle=p[Math.floor(i/t.props.discs*20)],t.ctx.fillRect(r,s,n,20),t.ctx.strokeStyle="black",t.ctx.lineWidth=3,t.ctx.strokeRect(r,s,n,20),n-=20,e[a]+=1})}},{key:"render",value:function(){return i.a.createElement("canvas",{ref:"canvas",width:this.getWidth(),height:this.getHeigth()})}}]),e}(i.a.Component);n(178);function b(t){return i.a.createElement("div",{className:t.hidden?"hidden":"visible"},t.children)}var x=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state=void 0,n.componentDidUpdate=function(t){if(t.solutionId!==n.props.solutionId){console.log("new solution received");for(var e=[],a=0;a<n.props.discs;a++)e.push(0);n.setState({currentIndex:-1,discLocations:e}),n.state.timer&&clearInterval(n.state.timer);var i=setInterval(n.cycleSolution,n.getAnimationSpeed(n.props.discs));n.setState({timer:i})}},n.cycleSolution=function(){var t=n.state.currentIndex+1;if(t>=n.props.solution.length)clearInterval(n.state.timer),n.setState({timer:null});else{var e=n.props.solution[t][0],a=n.props.solution[t][1],i=Object(h.a)(n.state.discLocations);i[i.lastIndexOf(e)]=a,n.setState({discLocations:i,currentIndex:t})}},n.getAnimationSpeed=function(t){return t<6?750:t<11?500:t<16?200:50},n.getOptimalMoveCount=function(){return Math.pow(2,n.props.discs)-1},n.getProgressPercentage=function(){return n.state.timer?n.state.currentIndex/n.props.solution.length*100:0},n.displayTimeRemaining=function(){if(!n.state.timer)return"n/a";var t=(n.props.solution.length-n.state.currentIndex)*n.getAnimationSpeed(n.props.discs),e=new Date;return Object(f.distanceInWordsStrict)(e,Object(f.addMilliseconds)(e,t))+" remaining"},n.getProgressBar=function(){return i.a.createElement("div",{style:{width:"50px",margin:"auto",paddingTop:"10px"}},i.a.createElement(m.a,{percentage:n.getProgressPercentage(),strokeWidth:25,styles:{path:{strokeLinecap:"butt",stroke:p[Math.floor(n.getProgressPercentage()/6)]},text:{fill:"#000"}}}))},n.state={currentId:null,currentIndex:null,timer:null,discLocations:[0,0,0,0,0]},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(g,{discs:this.props.discs,discLocations:this.state.discLocations}),i.a.createElement("br",null),"".concat(this.state.currentIndex+1," / ").concat(this.getOptimalMoveCount()),i.a.createElement(b,{hidden:!this.state.timer},this.getProgressBar(),this.displayTimeRemaining()))}}]),e}(i.a.Component);function O(t){var e=Array(t).fill(null).map(function(t,e){return e+1}),n=[],a=[];e.name=0,n.name=1,a.name=2;var i=[];return function t(e,n,a,i,s){e>0&&(t(e-1,n,i,a,s),a.push(n.pop()),s.push([n.name,a.name]),t(e-1,i,a,n,s))}(t,e,a,n,i),i}n(179);var E=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state=void 0,n.setDiscs=function(t){n.setState({discAmount:t.target.value})},n.solve=function(){var t=O(n.state.discAmount);n.props.setSolution(n.state.discAmount,t),p=v()},n.state={discAmount:5},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"solution"},i.a.createElement("label",{htmlFor:"discs"},"Set the number of discs"),i.a.createElement("input",{name:"discs",type:"range",min:"3",max:"20",value:this.state.discAmount,onChange:this.setDiscs}),i.a.createElement("span",{className:"number"},this.state.discAmount),i.a.createElement("button",{onClick:this.solve},"Solve"))}}]),e}(i.a.Component),y=(n(180),function(){return i.a.createElement("div",{className:"footer"},i.a.createElement("hr",null),"\ud83c\udf1e ",i.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Tower_of_Hanoi"},"Wikipedia")," | ",i.a.createElement("a",{href:"https://github.com/jvuor/hanoi-towers"},"Github")," \ud83c\udf1e")});var j=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state=void 0,n.setSolution=function(t,e){n.setState({discs:t,solution:e,solutionId:n.state.solutionId+1})},n.state={discs:5,solution:null,solutionId:0},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"center"},i.a.createElement("div",null,i.a.createElement("div",{className:"container container-header"},i.a.createElement("div",{className:/iPad|iPhone/.test(navigator.userAgent)?"":"header-effect"},"Tower of Hanoi")),i.a.createElement("div",{className:"container container-app"},i.a.createElement(E,{setSolution:this.setSolution}),i.a.createElement(x,{discs:this.state.discs,solution:this.state.solution,solutionId:this.state.solutionId}),i.a.createElement(y,null))))}}]),e}(i.a.Component);n(181);r.a.render(i.a.createElement(j,null),document.getElementById("root"))},68:function(t,e,n){t.exports=n(182)},75:function(t,e,n){}},[[68,1,2]]]);
//# sourceMappingURL=main.ad2a5fe3.chunk.js.map
{"version":3,"sources":["util/palette.ts","components/SolutionCanvas.tsx","components/SolutionDisplay.tsx","util/recursive.ts","components/SolutionBuilder.tsx","components/Footer.tsx","App.tsx","index.tsx"],"names":["palette","generatePalette","rng","min","max","Math","floor","random","step","map","color","colors","Object","toConsumableArray","i","push","c","paletteRGB","value","concat","document","body","style","background","SolutionCanvas","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","rods","rodsNr","canvas","ctx","getWidthOfTheLargestDisc","discs","getHeigth","getWidth","width","height","refs","getContext","drawBase","_this2","widthOfTheLargestDisc","rodHeight","rodSpot","rodInterval","Array","fill","rod","spot","fillStyle","fillRect","beginPath","lineWidth","moveTo","lineTo","forEach","stroke","drawDiscs","_this3","discsAtRod","discWidth","discLocations","disc","discInitY","discInitX","strokeStyle","strokeRect","react_default","a","createElement","ref","React","Component","SolutionDisplay","_React$Component","componentDidUpdate","oldProps","solutionId","console","log","setState","currentIndex","timer","clearInterval","setInterval","cycleSolution","getAnimationSpeed","newIndex","solution","length","from","to","newLocations","lastIndexOf","getOptimalMoveCount","pow","getProgressPercentage","displayTimeRemaining","timeLeft_ms","now","Date","distanceInWordsStrict","addMilliseconds","getProgressBar","margin","paddingTop","index_esm","percentage","strokeWidth","styles","path","strokeLinecap","text","currentId","inherits","createClass","key","SolutionCanvas_SolutionCanvas","solve","numberOfDiscs","b","name","move","n","source","target","aux","pop","SolutionBuilder","setDiscs","event","discAmount","setSolution","className","htmlFor","type","onChange","onClick","Footer","href","App","SolutionBuilder_SolutionBuilder","SolutionDisplay_SolutionDisplay","components_Footer","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.21e30165.chunk.js","sourcesContent":["let palette = generatePalette();\r\n\r\nfunction newPalette() {\r\n  palette = generatePalette();\r\n}\r\n\r\nfunction generatePalette() {\r\n  const rng = (min: number, max: number) => Math.floor(Math.random() * (max - min)) + min;\r\n\r\n  const palette = [];\r\n  const targetColor = [rng(50, 220), rng(50, 220), rng(50, 220)];\r\n  const step = targetColor.map(color => color / 22);\r\n  let colors = [...step];\r\n\r\n  for (let i = 0; i < 20; i++) {\r\n    palette.push(colors);\r\n    colors = colors.map((c, i) => c + step[i]);\r\n  }\r\n\r\n  const paletteRGB = palette.map(value => `rgb(${value[0]}, ${value[1]}, ${value[2]})`);\r\n  document.body.style.background = `repeating-linear-gradient(\r\n                                      -45deg,\r\n                                      ${paletteRGB[10]},\r\n                                      ${paletteRGB[10]} 30px,\r\n                                      ${paletteRGB[16]} 30px,\r\n                                      ${paletteRGB[16]} 60px\r\n                                    )`\r\n  \r\n  \r\n\r\n  return paletteRGB\r\n}\r\n\r\n\r\nexport { palette, newPalette }\r\n","import React from 'react';\r\nimport { palette } from '../util/palette'; \r\n\r\nexport interface SolutionCanvasProps {\r\n  discs: number;\r\n  discLocations: number[]\r\n}\r\n\r\ninterface SolutionCanvasState {\r\n  width: number,\r\n  height: number\r\n}\r\n\r\nexport default class SolutionCanvas extends React.Component<SolutionCanvasProps> {\r\n  state: SolutionCanvasState;\r\n\r\n  rods: number[];\r\n  rodsNr: number;\r\n  canvas: HTMLCanvasElement;\r\n  ctx: CanvasRenderingContext2D;\r\n\r\n  constructor(props: SolutionCanvasProps) {\r\n    super(props);\r\n    this.rodsNr = 3;\r\n    this.state = {width: 100, height: 100};\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.canvas = this.refs.canvas as HTMLCanvasElement;\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n    this.drawBase();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.drawBase();\r\n  }\r\n\r\n  getWidthOfTheLargestDisc = () => 40 + (20 * this.props.discs)\r\n  // height and width of the canvas\r\n  getHeigth = () => (this.props.discs * 20) + 60;\r\n  getWidth = () => this.getWidthOfTheLargestDisc() * this.rodsNr + (20 * this.rodsNr);\r\n\r\n  /**\r\n   * Draws the background and the rods\r\n   */\r\n  drawBase() {\r\n    const widthOfTheLargestDisc = this.getWidthOfTheLargestDisc();\r\n    const width = this.getWidth();\r\n    const height = this.getHeigth();\r\n    const rodHeight = height - 40;\r\n\r\n    // calculating the places for the rods\r\n    let rodSpot = 20 + widthOfTheLargestDisc / 2;\r\n    let rodInterval = widthOfTheLargestDisc + 10;\r\n    this.rods = new Array(this.rodsNr).fill(null);\r\n    this.rods = this.rods.map(rod => {\r\n      const spot = rodSpot;\r\n      rodSpot += rodInterval;\r\n      return spot\r\n    });\r\n\r\n    // fill background\r\n    this.ctx.fillStyle = '#ffffff';\r\n    this.ctx.fillRect(0, 0, width, height);\r\n\r\n    // draw the ground and the rods\r\n    this.ctx.beginPath();\r\n    this.ctx.lineWidth = 4;\r\n    this.ctx.moveTo(0, height - 10);\r\n    this.ctx.lineTo(width, height - 10);\r\n    this.rods.forEach(rod => {\r\n      this.ctx.moveTo(rod, height - 10);\r\n      this.ctx.lineTo(rod, (height - 10) - rodHeight);\r\n    })\r\n\r\n    this.ctx.stroke();\r\n\r\n    this.drawDiscs();\r\n  }\r\n\r\n  /**\r\n   * Draws the discs\r\n   */\r\n  drawDiscs() {\r\n    // this keeps count of how many discs there already are on a rod so we can calculate\r\n    // the correct y position\r\n    const discsAtRod = Array(this.rodsNr).fill(0);\r\n    let discWidth = this.getWidthOfTheLargestDisc();\r\n\r\n    // drawing the discs one at a time, starting from the largest\r\n    this.props.discLocations.forEach((disc, i) => {\r\n\r\n      // calculating where to draw the disc\r\n      const discInitY = this.getHeigth() - 10 - (discsAtRod[disc] * 20) - 20;\r\n      const discInitX = this.rods[disc] - (discWidth / 2);\r\n\r\n      // pick a color from the palette\r\n      this.ctx.fillStyle = palette[Math.floor((i / this.props.discs)* 20)];\r\n\r\n      // draw the disc\r\n      this.ctx.fillRect(discInitX, discInitY, discWidth, 20);\r\n\r\n      // draw the outline for the disc\r\n      this.ctx.strokeStyle = 'black';\r\n      this.ctx.lineWidth = 3;\r\n      this.ctx.strokeRect(discInitX, discInitY, discWidth, 20)\r\n\r\n      discWidth -= 20;\r\n      discsAtRod[disc] += 1;\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <canvas ref=\"canvas\" width={this.getWidth()} height={this.getHeigth()}/>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport CircularProgressbar from 'react-circular-progressbar';\r\nimport { distanceInWordsStrict, addMilliseconds } from 'date-fns'\r\nimport { Solution } from '../util/towers.interface';\r\nimport SolutionCanvas from './SolutionCanvas';\r\nimport { palette } from '../util/palette';\r\n\r\nexport interface SolutionDisplayProps {\r\n  discs: number;\r\n  solution: Solution;\r\n  solutionId: number;\r\n}\r\n\r\ninterface SolutionDisplayState {\r\n  currentId: number;\r\n  currentIndex: number;\r\n  timer: NodeJS.Timeout;\r\n  discLocations: number[];\r\n}\r\n\r\nexport class SolutionDisplay extends React.Component<SolutionDisplayProps> {\r\n  state: SolutionDisplayState\r\n\r\n  constructor(props: SolutionDisplayProps) {\r\n    super(props);\r\n    this.state = {\r\n      currentId: null,\r\n      currentIndex: null,\r\n      timer: null,\r\n      discLocations: [0, 0, 0, 0, 0],\r\n    };\r\n  }\r\n\r\n  componentDidUpdate = (oldProps: SolutionDisplayProps) => {\r\n    if (oldProps.solutionId !== this.props.solutionId) {\r\n      console.log('new solution received');\r\n      const discLocations = [];\r\n      for (let i = 0; i < this.props.discs; i++) {\r\n        discLocations.push(0);\r\n      }\r\n      this.setState({\r\n        currentIndex: -1,\r\n        discLocations\r\n      });\r\n      if(this.state.timer) {\r\n        clearInterval(this.state.timer);\r\n      }\r\n      const timer = setInterval(this.cycleSolution, this.getAnimationSpeed(this.props.discs));\r\n      this.setState({timer});\r\n    }\r\n  }\r\n\r\n  cycleSolution = () => {\r\n    const newIndex = this.state.currentIndex + 1;\r\n    if (newIndex >= this.props.solution.length) {\r\n      clearInterval(this.state.timer)\r\n      this.setState({\r\n        timer: null\r\n      })\r\n    } else {\r\n      const from = this.props.solution[newIndex][0];\r\n      const to = this.props.solution[newIndex][1];\r\n      const newLocations = [...this.state.discLocations];\r\n      newLocations[newLocations.lastIndexOf(from)] = to;\r\n      this.setState({ discLocations: newLocations, currentIndex: newIndex });\r\n    }\r\n  }\r\n\r\n  getAnimationSpeed = (discs: number): number => {\r\n    if (discs < 6) {\r\n      return 750;\r\n    } else if (discs < 11) {\r\n      return 500;\r\n    } else if (discs < 16) {\r\n      return 200;\r\n    } else {\r\n      return 50;\r\n    }\r\n  }\r\n\r\n  getOptimalMoveCount = (): number => (2 ** this.props.discs) - 1\r\n\r\n  getProgressPercentage = () : number => {\r\n    const progressPercentage = (this.state.currentIndex / this.props.solution.length) * 100;\r\n    return progressPercentage;\r\n  }\r\n\r\n  displayTimeRemaining = () => {\r\n    if (!this.state.timer) {\r\n      return null;\r\n    }\r\n    const movesLeft = this.props.solution.length - this.state.currentIndex;\r\n    const timeLeft_ms = movesLeft * this.getAnimationSpeed(this.props.discs);\r\n\r\n    const now = new Date();\r\n    const description = distanceInWordsStrict(now, addMilliseconds(now, timeLeft_ms));\r\n    return description + ' remaining';\r\n  }\r\n\r\n  getProgressBar = (): any => {\r\n    if (!this.state.timer) {\r\n      return null;\r\n    }\r\n    return(\r\n      <div \r\n        style={{width:'50px', margin:'auto', paddingTop:'10px'}}\r\n      >\r\n        <CircularProgressbar \r\n          percentage={this.getProgressPercentage()}\r\n          strokeWidth={25}\r\n          styles={{\r\n            path: { strokeLinecap: \"butt\", stroke: palette[Math.floor(this.getProgressPercentage() / 6)] },\r\n            text: { fill: \"#000\" }\r\n          }}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div>\r\n        <SolutionCanvas discs={this.props.discs} discLocations={this.state.discLocations}/><br />\r\n        {`${this.state.currentIndex + 1} / ${this.getOptimalMoveCount()}`}\r\n        {this.getProgressBar()}\r\n        {this.displayTimeRemaining()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { Solution } from \"./towers.interface\";\r\n\r\ninterface Rod extends Array<number> {\r\n  name?: number;\r\n}\r\n\r\nexport default function solve (numberOfDiscs: number): Solution {\r\n  const a: Rod = Array(numberOfDiscs).fill(null).map((a, i) => i + 1);\r\n  const b: Rod = [];\r\n  const c: Rod = [];\r\n  a.name = 0;\r\n  b.name = 1;\r\n  c.name = 2;\r\n  const solution: Solution = [];\r\n  move(numberOfDiscs, a, c, b, solution);\r\n\r\n  return solution;\r\n}\r\n\r\nfunction move(n: number, source: Rod, target: Rod, aux: Rod, solution: Solution) {\r\n  if (n > 0) {\r\n    move(n - 1, source, aux, target, solution);\r\n    target.push(source.pop());\r\n    solution.push([source.name, target.name]);\r\n    move(n - 1, aux, target, source, solution);\r\n  }\r\n}\r\n","import React from 'react'\r\nimport solve from '../util/recursive';\r\nimport './solutionBuilder.css';\r\nimport { Solution } from '../util/towers.interface';\r\nimport { newPalette } from '../util/palette';\r\n\r\nexport interface SolutionBuilderProps {\r\n  setSolution: (discs: number, solution: Solution) => void;\r\n}\r\n\r\ninterface SolutionBuilderState {\r\n  discAmount: number\r\n}\r\n\r\nexport class SolutionBuilder extends React.Component<SolutionBuilderProps> {\r\n  state: SolutionBuilderState;\r\n\r\n  constructor(props: SolutionBuilderProps) {\r\n    super(props);\r\n    this.state = {\r\n      discAmount: 5\r\n    };\r\n  }\r\n\r\n  setDiscs = (event) => {\r\n    this.setState({\r\n      discAmount: event.target.value\r\n    });\r\n  }\r\n\r\n  solve = () => {\r\n    const solution: Solution = solve(this.state.discAmount);\r\n    this.props.setSolution(this.state.discAmount, solution);\r\n    newPalette();\r\n  }\r\n \r\n  render() {\r\n    return(\r\n      <div className=\"solution\">\r\n        <label htmlFor=\"discs\">Set the number of discs</label>\r\n        <input\r\n          name=\"discs\"\r\n          type=\"range\"\r\n          min=\"3\"\r\n          max=\"20\"\r\n          value={this.state.discAmount}\r\n          onChange={this.setDiscs}\r\n        />\r\n        <span className=\"number\">{this.state.discAmount}</span>\r\n        <button onClick={this.solve}>Solve</button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react';\r\nimport './footer.css'\r\n\r\nconst Footer: React.FC = () => {\r\n  return(\r\n    <div className=\"footer\">\r\n      <hr />\r\n      🌞 <a href=\"https://en.wikipedia.org/wiki/Tower_of_Hanoi\">Wikipedia</a> | <a href=\"https://github.com/jvuor/hanoi-towers\">Github</a> 🌞\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport 'normalize.css';\r\nimport './App.css';\r\nimport { SolutionDisplay } from './components/SolutionDisplay';\r\nimport { SolutionBuilder } from './components/SolutionBuilder';\r\nimport { Solution } from './util/towers.interface';\r\nimport Footer from './components/Footer';\r\n\r\ninterface AppState {\r\n  discs: number,\r\n  solution: Solution,\r\n  solutionId: number;\r\n}\r\n\r\nclass App extends React.Component {\r\n  state: AppState;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      discs: 5,\r\n      solution: null,\r\n      solutionId: 0\r\n    }\r\n  }\r\n\r\n  setSolution = (discs: number, solution: Solution) => {\r\n    this.setState({discs, solution, solutionId: this.state.solutionId + 1});\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"center\">\r\n        <div>\r\n          <div className=\"container container-header\">\r\n            <div className=\"header-effect\">\r\n              Tower of Hanoi\r\n            </div>\r\n          </div>\r\n          <div className=\"container container-app\">\r\n            <SolutionBuilder setSolution={this.setSolution} />\r\n            <SolutionDisplay discs={this.state.discs} solution={this.state.solution} solutionId={this.state.solutionId} />\r\n            <Footer />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'react-circular-progressbar/dist/styles.css';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}